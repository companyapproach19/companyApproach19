<!DOCTYPE html>
<html lang="en">

<head>

<!--------------------------------->
<script language="Javascript" >
function download(filename, text) {
  var pom = document.createElement('a');
  pom.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));
  pom.setAttribute('download', filename);
  pom.style.display = 'none';
  
  document.body.appendChild(pom);
  pom.click();
  
  document.body.removeChild(pom);
}
function addTextTXT()
{
    document.addtext.name.value = document.addtext.name.value + ".txt"
}
</script>
<!--------------------------------->

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>Fábrica</title>

  <!-- Custom styles for this template -->

  <link href="archivo.css" rel="stylesheet">

</head>

<body>

  <div class="overlay"></div>
  
  <div class="masthead">
    <div class="masthead-bg"></div>
    <div class="container h-100">
      <div class="row h-100">
        <div class="col-12 my-auto">
          <div class="masthead-content text-white py-5 py-md-0">
            <h1 class="mb-3">Fábrica</h1>
              <h2 class="mb-5"> Solicitar pedido
                </div>

                  <!--------------------------------->
    <form id="formulario" method="post" onsubmit="download(this['name'].value, getParametros())">
  <!--------------------------------->

    <form id="formulario" method="post" action="datos.php">
      <label for="apellidos">Remitente:</label>
        <select name="OS">
        <option value="1">Fábrica</option>
        </select>  
        <p>
        <label for="nombre">Destino:</label>
        <input type="text" name="nombre" id="nombre" value="" required>
        <p>
        <label for="apellidos">Identificador:</label>
        <input type="text" name="apellidos" id="apellidos" value="" required>
        <p>
        <label for="producto1">Malta de base pálida</label>
        <input type="checkbox" name="producto1" id="producto1" value="Malta de base pálida">
        <input type="number" name="cantidad1" id="cantidad1" value="" min="0" placeholder="Escribe la cantidad">
        <p>
          <label for="producto1">Malta Munich</label>
        <input type="checkbox" name="producto1" id="producto1" value="Malta Munich">
        <input type="number" name="cantidad1" id="cantidad1" value="" min="0" placeholder="Escribe la cantidad">
        <p>
          <label for="producto1">Malta negra</label>
        <input type="checkbox" name="producto1" id="producto1" value="Malta negra">
        <input type="number" name="cantidad1" id="cantidad1" value="" min="0" placeholder="Escribe la cantidad">
        <p>
          <label for="producto1">Malta crystal</label>
        <input type="checkbox" name="producto1" id="producto1" value="Malta crystal">
        <input type="number" name="cantidad1" id="cantidad1" value="" min="0" placeholder="Escribe la cantidad">
        <p>
          <label for="producto1">Malta chocolate</label>
        <input type="checkbox" name="producto1" id="producto1" value="Malta chocolate">
        <input type="number" name="cantidad1" id="cantidad1" value="" min="0" placeholder="Escribe la cantidad">
        <p>
          <label for="producto1">Malta caramelo</label>
        <input type="checkbox" name="producto1" id="producto1" value="Malta">
        <input type="number" name="cantidad1" id="cantidad1" value="" min="0" placeholder="Escribe la cantidad">
        <p>
        <label for="producto2">Cebada</label>
        <input type="checkbox" name="producto2" id="producto2" value="Cebada">
        <input type="number" name="cantidad2" id="cantidad2" min="0"  placeholder="Escribe la cantidad">     
        <p>
           <label for="producto2">Cebada Tostada</label>
        <input type="checkbox" name="producto2" id="producto2" value="Cebada Tostada">
        <input type="number" name="cantidad2" id="cantidad2" min="0"  placeholder="Escribe la cantidad">     
        <p>
        <label for="producto3">Lúpulo centenial</label>
        <input type="checkbox" name="producto1" id="producto3" value="Lúpulo centenial">
        <input type="number" name="cantidad1" id="cantidad3" value="" min="0" placeholder="Escribe la cantidad">        
        <p>
        <label for="nombre">Transportista:</label>
        <input type="text" name="nombre" id="nombre" value="" placeholder="Elige transportista" required>
         <div class="input">
        <p>
            <button type="submit" class="btn first">Enviar pedido</button>
			<button type="reset" class="btn first">Limpiar formulario</button>
        </div>
</form>
		  <div class="volver">
           <button class="btn first" value="Volver" onclick="window.location='Fábrica.html';">Volver</button>
          </div>

<script>
  function getParametros() {
    var destino = document.getElementById("destino").value;
    var id = document.getElementById("id").value;
  
    var cantidad1 = document.getElementById("cantidad1").value;
    var cantidad2 = document.getElementById("cantidad2").value;
    var cantidad3 = document.getElementById("cantidad3").value;
    var cantidad4 = document.getElementById("cantidad4").value;
    var cantidad5 = document.getElementById("cantidad5").value;
    var cantidad6 = document.getElementById("cantidad6").value;
    var cantidad7 = document.getElementById("cantidad7").value;
    var cantidad8 = document.getElementById("cantidad8").value;
    var cantidad9 = document.getElementById("cantidad9").value;
    var producto1 = document.getElementById("producto1").value;
    var producto2 = document.getElementById("producto2").value;
    var producto3 = document.getElementById("producto3").value;
    var producto4 = document.getElementById("producto4").value;
    var producto5 = document.getElementById("producto5").value;
    var producto6 = document.getElementById("producto6").value;
    var producto7 = document.getElementById("producto7").value;
    var producto8 = document.getElementById("producto8").value;
    var producto9 = document.getElementById("producto9").value;
  
    var transportista = document.getElementById("transportista").value;
  
  
 res = "Destino:   ".concat(destino).concat("\nID:  ").concat(id).concat("\nMalta de base pálida:  ").concat(cantidad1).concat("\nMalta Munich:  ").concat(cantidad2).concat("\nMalta negra:  ").concat(cantidad3).concat("\nMalta crystal:  ").concat(cantidad4).concat("\nMalta chocolate:  ").concat(cantidad5).concat("\nMalta caramelo:  ").concat(cantidad6).concat("\ncebada:  ").concat(cantidad7).concat("\nCebada Tostada:  ").concat(cantidad8).concat("\nLúpulo centenial:  ").concat(cantidad9).concat("\nTransportista:  ").concat(transportista);
    
  return res;
  }

function getJson(){


  var destino = document.getElementById("destino").value;
    var id = document.getElementById("id").value;
  
    var cantidad1 = document.getElementById("cantidad1").value;
    var cantidad2 = document.getElementById("cantidad2").value;
    var cantidad3 = document.getElementById("cantidad3").value;
    var cantidad4 = document.getElementById("cantidad4").value;
    var cantidad5 = document.getElementById("cantidad5").value;
    var cantidad6 = document.getElementById("cantidad6").value;
    var cantidad7 = document.getElementById("cantidad7").value;
    var cantidad8 = document.getElementById("cantidad8").value;
    var cantidad9 = document.getElementById("cantidad9").value;
    var producto1 = document.getElementById("producto1").value;
    var producto2 = document.getElementById("producto2").value;
    var producto3 = document.getElementById("producto3").value;
    var producto4 = document.getElementById("producto4").value;
    var producto5 = document.getElementById("producto5").value;
    var producto6 = document.getElementById("producto6").value;
    var producto7 = document.getElementById("producto7").value;
    var producto8 = document.getElementById("producto8").value;
    var producto9 = document.getElementById("producto9").value;
  
    var transportista = document.getElementById("transportista").value;
//Json
   var hola = { 
    "id": id,
    actorOrigen: "Tienda",
    "destinatario": destino,
    'transportista': {
  "nombre": transportista,
  "empresa": "Povas",
  "fecha_recogida": "08-03-2019",
  "fecha_entrega": "13-03-2019"
    },
    "productos": {
  "cant_malta_palida": cantidad1,
  "cant_malta_munich": cantidad2,
  "cant_malta_negra": cantidad3,
  "cant_malta_crystal": cantidad4,
  "cant_malta_chocolate": cantidad5,
  "cant_malta_caramelo": cantidad6,
  "cant_cebada": cantidad7,
  "cant_cebada_tostada": cantidad8,
  "cant_lupulo_centenial": cantidad9
    },
    "mensaje": "Petición de prueba.",
    "firmadoRecogida": false,
    "firmadoEntrega": false
}
//Aqui se hace json de verdad
var myJson = JSON.stringify(hola);  



/*

$.ajax({
    // la URL para la petición
    url : '',
 
    // la información a enviar
    // (también es posible utilizar una cadena de datos)
    data : myJson,
 
    // especifica si será una petición POST o GET
    type : 'POST',
 
    // el tipo de información que se espera de respuesta
    dataType : 'json',
 
    // código a ejecutar si la petición es satisfactoria;
    // la respuesta es pasada como argumento a la función

    })


*/




}

</script>


            <div class="input-group input-group-newsletter"></div>
</body>

</html>